<div class="modal-backdrop" (click)="close.emit()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">
        {{ interviewToEdit ? "Edit Interview" : "Add Interview" }}
      </h2>
      <button type="button" class="modal-close" (click)="close.emit()">
        <i class="ri-close-line" aria-hidden="true"></i>
        <span class="sr-only">Close</span>
      </button>
    </div>

    <form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate class="modal-body">
      <div class="modal-grid">
        <!-- Column 1 -->
        <div class="modal-col">
          <div class="field">
            <label class="field-label" for="courierName">Courier Name *</label>
            <input
              id="courierName"
              type="text"
              class="field-input"
              name="courierName"
              [(ngModel)]="model.courierName"
              required
            />
          </div>

          <div class="field">
            <label class="field-label" for="phoneNumber">Phone Number *</label>
            <input
              id="phoneNumber"
              type="text"
              class="field-input"
              name="phoneNumber"
              [(ngModel)]="model.phoneNumber"
              required
            />
          </div>

          <div class="field">
            <label class="field-label" for="residence">Residence / محل الإقامة</label>
            <input
              id="residence"
              type="text"
              class="field-input"
              name="residence"
              [(ngModel)]="model.residence"
            />
          </div>

          <div class="field">
            <label class="field-label" for="nationalId">National ID</label>
            <input
              id="nationalId"
              type="text"
              class="field-input"
              name="nationalId"
              [(ngModel)]="model.nationalId"
            />
          </div>

          <div class="field">
            <label class="field-label" for="account">Account (Client) *</label>
            <select
              id="account"
              class="field-input"
              name="account"
              [(ngModel)]="model.accountName"
              (ngModelChange)="onAccountChange()"
              required
            >
              <option [ngValue]="''">Select account</option>
              <option *ngFor="let acc of clients" [ngValue]="acc.name">
                {{ acc.name }}
              </option>
            </select>
          </div>

          <div class="field">
            <label class="field-label" for="hub">Hub</label>
            <select
              id="hub"
              class="field-input"
              name="hub"
              [(ngModel)]="model.hubName"
              (ngModelChange)="onHubChange()"
            >
              <option [ngValue]="''">Select hub</option>
              <option *ngFor="let hub of hubs" [ngValue]="hub.name">
                {{ hub.name }}
              </option>
            </select>
          </div>

          <div class="field">
            <label class="field-label" for="zone">Zone</label>
            <select
              id="zone"
              class="field-input"
              name="zone"
              [(ngModel)]="model.zoneName"
            >
              <option [ngValue]="''">Select zone</option>
              <option *ngFor="let z of zones" [ngValue]="z.name">
                {{ z.name }}
              </option>
            </select>
          </div>

          <div class="field">
            <label class="field-label" for="position">Position</label>
            <input
              id="position"
              type="text"
              class="field-input"
              name="position"
              [(ngModel)]="model.position"
            />
          </div>

          <div class="field">
            <label class="field-label" for="vehicleType">Vehicle Type</label>
            <select
              id="vehicleType"
              class="field-input"
              name="vehicleType"
              [(ngModel)]="model.vehicleType"
            >
              <option [ngValue]="''">None</option>
              <option *ngFor="let v of vehicleTypeOptions" [ngValue]="v">
                {{ v }}
              </option>
            </select>
          </div>
        </div>

        <!-- Column 2 -->
        <div class="modal-col">
          <div class="field">
            <label class="field-label" for="accountManagerName">Account Manager</label>
            <select
              id="accountManagerName"
              class="field-input"
              name="accountManagerName"
              [(ngModel)]="model.accountManagerName"
            >
              <option [ngValue]="''">Select account manager</option>
              <option *ngFor="let u of operationUsers" [ngValue]="u.fullName">
                {{ u.fullName }}
              </option>
            </select>
          </div>

          <div class="field">
            <label class="field-label" for="interviewerName">Interviewer</label>
            <select
              id="interviewerName"
              class="field-input"
              name="interviewerName"
              [(ngModel)]="model.interviewerName"
            >
              <option [ngValue]="''">Select interviewer</option>
              <option *ngFor="let u of operationUsers" [ngValue]="u.fullName">
                {{ u.fullName }}
              </option>
            </select>
          </div>


          <div class="field">
            <label class="field-label" for="signedWithHr">Signed with HR</label>
            <select
              id="signedWithHr"
              class="field-input"
              name="signedWithHr"
              [(ngModel)]="model.signedWithHr"
            >
              <option [ngValue]="''">Select status</option>
              <option *ngFor="let v of signedWithHrOptions" [ngValue]="v">
                {{ v }}
              </option>
            </select>
          </div>

          <!-- ✅ NEW: Licenses -->
          <div class="field">
            <label class="field-label" for="vLicenseExpiryDate">Vehicle License Expiry</label>
            <input
              id="vLicenseExpiryDate"
              type="date"
              class="field-input"
              name="vLicenseExpiryDate"
              [(ngModel)]="model.vLicenseExpiryDate"
            />
          </div>

          <div class="field">
            <label class="field-label" for="dLicenseExpiryDate">Driver License Expiry</label>
            <input
              id="dLicenseExpiryDate"
              type="date"
              class="field-input"
              name="dLicenseExpiryDate"
              [(ngModel)]="model.dLicenseExpiryDate"
            />
          </div>

          <div class="field">
            <label class="field-label" for="idExpiryDate">National ID Expiry</label>
            <input
              id="idExpiryDate"
              type="date"
              class="field-input"
              name="idExpiryDate"
              [(ngModel)]="model.idExpiryDate"
            />
          </div>

          <div class="field">
            <label class="field-label" for="notes">Notes</label>
            <textarea
              id="notes"
              class="field-input field-textarea"
              name="notes"
              [(ngModel)]="model.notes"
              rows="3"
            ></textarea>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn--ghost" (click)="close.emit()">
          Cancel
        </button>
        <button type="submit" class="btn btn--primary">
          {{ interviewToEdit ? "Save changes" : "Create interview" }}
        </button>
      </div>
    </form>
  </div>
</div>
