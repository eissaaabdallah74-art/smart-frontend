<!-- src/app/app.html -->

<!-- الشِل الرئيسية عند تسجيل الدخول -->
<div *ngIf="user() as currentUser; else authRoutes" class="app-shell">
  <!-- Sidebar ثابت على اليسار -->
<app-sidebar
  class="sidenav"
  [perms]="perms()"
  [role]="currentUser.role"
  [position]="currentUser.position || null"
>
</app-sidebar>


  <!-- عمود الهيدر + المحتوى -->
  <div class="main-column">
    <app-header
      [user]="currentUser"
      [perms]="perms()"
      (logout)="logout()"
    >
    </app-header>

    <main class="content" role="main">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<!-- شاشة اللوجين/الراوتر لما مفيش مستخدم -->
<ng-template #authRoutes>
  <router-outlet></router-outlet>
</ng-template>
